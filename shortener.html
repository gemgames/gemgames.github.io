<!DOCTYPE html>
<html>
  <body>
    <textarea id="x" name="x" rows="10" cols="20"></textarea>
    <p>abcdefghijklmabcdefghijklm</p>
  <p>#="abcdefghijklm",${#}${#}</p>
  <p>abcdefghiabcdefghiabcdefghi</p>
      <p>#="abcdefghi",${#}${#}${#}</p>
    <button onclick="myFunction()">shorten</button>

    <script>
      var min = 5;
      var max = 30;
      var list = [];
      var output = "";
      var data;
      function myFunction() {
        output = "";
        data = document.getElementById("x").value;
        let i, j, k, l, a;
        for (i = min; i < max + 1; i++) {
          k = {};
          l = [];
          for (j = 0; j < data.length + 1 - i; j++) {
            a = data.substring(j, j + i);
            l.push(a);
            k[a] = k[a] == undefined ? 1 : k[a] + 1;
          }
          for (j = 0; j < l.length; j++) {
            if (k[l[j]] > 2) {
              list.push(l[j]);
              output += l[j] + "\n";
            }
          }
        }
        console.log(output);
      }
    </script>
  </body>
</html>
